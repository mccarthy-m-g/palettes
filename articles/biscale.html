<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="palettes">
<title>Using palettes with biscale • palettes</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using palettes with biscale">
<meta property="og:description" content="palettes">
<meta property="og:image" content="https://mccarthy-m-g.github.io/palettes/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">palettes</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/palettes.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/ggplot2.html">Using palettes with ggplot2</a>
    <a class="dropdown-item" href="../articles/gt.html">Using palettes with gt</a>
    <a class="dropdown-item" href="../articles/biscale.html">Using palettes with biscale</a>
    <a class="dropdown-item" href="../articles/compatibility.html">Compatibility with other colour packages</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Developer</h6>
    <a class="dropdown-item" href="../articles/creating-packages.html">Creating a colour palette package</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mccarthy-m-g/palettes/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Using palettes with biscale</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mccarthy-m-g/palettes/blob/HEAD/vignettes/biscale.Rmd" class="external-link"><code>vignettes/biscale.Rmd</code></a></small>
      <div class="d-none name"><code>biscale.Rmd</code></div>
    </div>

    
    
<p>This vignette shows you how to use palettes as bivariate colour and
fill scales with <strong>biscale</strong>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mccarthy-m-g.github.io/palettes/">palettes</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com" class="external-link">patchwork</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://chris-prener.github.io/biscale/" class="external-link">biscale</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="custom-palettes">Custom palettes<a class="anchor" aria-label="anchor" href="#custom-palettes"></a>
</h2>
<p>Colour vectors are naturally compatible with biscale, but with two
important differences:</p>
<ul>
<li>Colour vectors must be named</li>
<li>Colours in the vector must be specified as hexadecimal strings of
the form “#rrggbb”</li>
</ul>
<p>The name of each colour is used to specify its location in the
bivariate scale.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">named_colour_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pal_colour.html">pal_colour</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"1-1"</span> <span class="op">=</span> <span class="st">"#d3d3d3"</span>, <span class="co"># low x, low y</span></span>
<span>  <span class="st">"2-1"</span> <span class="op">=</span> <span class="st">"#9e3547"</span>, <span class="co"># high x, low y</span></span>
<span>  <span class="st">"1-2"</span> <span class="op">=</span> <span class="st">"#4279b0"</span>, <span class="co"># low x, high y</span></span>
<span>  <span class="st">"2-2"</span> <span class="op">=</span> <span class="st">"#311e3b"</span>  <span class="co"># high x, high y</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">named_colour_vector</span></span>
<span><span class="co">#&gt; &lt;palettes_colour[4]&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #C6C6C6;">•</span> #D3D3D3</span></span>
<span><span class="co">#&gt; <span style="color: #AF5F5F;">•</span> #9E3547</span></span>
<span><span class="co">#&gt; <span style="color: #5F87D7;">•</span> #4279B0</span></span>
<span><span class="co">#&gt; <span style="color: #5F005F;">•</span> #311E3B</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">named_colour_vector</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "1-1" "2-1" "1-2" "2-2"</span></span></code></pre></div>
<p>Names can also be added to unnamed colour vectors with
<code><a href="https://rdrr.io/r/base/names.html" class="external-link">names()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unnamed_colour_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pal_colour.html">pal_colour</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#d3d3d3"</span>, <span class="st">"#9e3547"</span>, <span class="st">"#4279b0"</span>, <span class="st">"#311e3b"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">unnamed_colour_vector</span><span class="op">)</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">unnamed_colour_vector</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1-1"</span>, <span class="st">"2-1"</span>, <span class="st">"1-2"</span>, <span class="st">"2-2"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">unnamed_colour_vector</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "1-1" "2-1" "1-2" "2-2"</span></span></code></pre></div>
<p>To preview the bivariate palette use
<code><a href="https://chris-prener.github.io/biscale/reference/bi_pal.html" class="external-link">biscale::bi_pal()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://chris-prener.github.io/biscale/reference/bi_pal.html" class="external-link">bi_pal</a></span><span class="op">(</span><span class="va">named_colour_vector</span>, dim <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><img src="biscale_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="creating-maps">Creating maps<a class="anchor" aria-label="anchor" href="#creating-maps"></a>
</h2>
<p>To create maps with colour vectors and colour palettes, we can follow
the general workflow covered in the <a href="https://chris-prener.github.io/biscale/articles/biscale.html" class="external-link">Get
started</a> article in biscale. The article demonstrates how to create
bivariate scales using race and income data from U.S. Census tracts for
the City of St. Louis in Missouri. We will recreate that map here using
a custom colour vector.</p>
<p>We begin by mapping race (the percentage of white residents) and
median income values to a bivariate scale with
<code><a href="https://chris-prener.github.io/biscale/reference/bi_class.html" class="external-link">biscale::bi_class()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">race_income</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://chris-prener.github.io/biscale/reference/bi_class.html" class="external-link">bi_class</a></span><span class="op">(</span></span>
<span>  <span class="va">stl_race_income</span>,</span>
<span>  x <span class="op">=</span> <span class="va">pctWhite</span>,</span>
<span>  y <span class="op">=</span> <span class="va">medInc</span>,</span>
<span>  dim <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  style <span class="op">=</span> <span class="st">"quantile"</span>,</span>
<span>  keep_factors <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Then create our named colour vector. There are more colours here than
in the previous example because we will be using a three-by-three
bivariate map instead of a two-by-two map.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">named_colour_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pal_colour.html">pal_colour</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"1-1"</span> <span class="op">=</span> <span class="st">"#d3d3d3"</span>, <span class="co"># low x, low y</span></span>
<span>  <span class="st">"2-1"</span> <span class="op">=</span> <span class="st">"#ba8890"</span>,</span>
<span>  <span class="st">"3-1"</span> <span class="op">=</span> <span class="st">"#9e3547"</span>, <span class="co"># high x, low y</span></span>
<span>  <span class="st">"1-2"</span> <span class="op">=</span> <span class="st">"#8aa6c2"</span>,</span>
<span>  <span class="st">"2-2"</span> <span class="op">=</span> <span class="st">"#7a6b84"</span>, <span class="co"># medium x, medium y</span></span>
<span>  <span class="st">"3-2"</span> <span class="op">=</span> <span class="st">"#682a41"</span>,</span>
<span>  <span class="st">"1-3"</span> <span class="op">=</span> <span class="st">"#4279b0"</span>, <span class="co"># low x, high y</span></span>
<span>  <span class="st">"2-3"</span> <span class="op">=</span> <span class="st">"#3a4e78"</span>,</span>
<span>  <span class="st">"3-3"</span> <span class="op">=</span> <span class="st">"#311e3b"</span> <span class="co"># high x, high y</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The bivariate legend used in biscale is actually a ggplot2 plot, so
we create the map and legend separately, then combine them. Here we
combine the map and legend using
<code><a href="https://patchwork.data-imaginist.com/reference/inset_element.html" class="external-link">patchwork::inset_element()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Draw map with a bivariate fill scale</span></span>
<span><span class="va">race_income_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">race_income</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">bi_class</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"white"</span>, size <span class="op">=</span> <span class="fl">0.1</span>, show.legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://chris-prener.github.io/biscale/reference/bi_scale_fill.html" class="external-link">bi_scale_fill</a></span><span class="op">(</span>pal <span class="op">=</span> <span class="va">named_colour_vector</span>, dim <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Race and Income in St. Louis, MO"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Breaks for percent white are 14.0% and 62.0% (range is 0-96.7%).</span></span>
<span><span class="st">    Breaks for median income are $26,200 and $43,900</span></span>
<span><span class="st">    (range is $10,500-$74,400)."</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://chris-prener.github.io/biscale/reference/bi_theme.html" class="external-link">bi_theme</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  </span>
<span><span class="co"># Draw the bivariate legend</span></span>
<span><span class="va">bivariate_legend</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://chris-prener.github.io/biscale/reference/bi_legend.html" class="external-link">bi_legend</a></span><span class="op">(</span></span>
<span>  pal <span class="op">=</span> <span class="va">named_colour_vector</span>,</span>
<span>  dim <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Higher % White "</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"Higher Income "</span>,</span>
<span>  size <span class="op">=</span> <span class="fl">7</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Combine the map and bivariate legend</span></span>
<span><span class="va">race_income_plot</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://patchwork.data-imaginist.com/reference/inset_element.html" class="external-link">inset_element</a></span><span class="op">(</span></span>
<span>    <span class="va">bivariate_legend</span>,</span>
<span>    left <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    bottom <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>    right <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>    top <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    align_to <span class="op">=</span> <span class="st">"plot"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="biscale_files/figure-html/unnamed-chunk-7-1.png" width="100%"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Michael McCarthy.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
